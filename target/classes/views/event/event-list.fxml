<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx/21.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="controllers.EventController"
            style="-fx-background-color: linear-gradient(to bottom, #f8fbff 0%, #eef3ff 45%, #fefefe 100%);">

    <!-- En-tÃªte marketing + actions rapides -->
    <top>
        <VBox spacing="12" style="-fx-padding: 18;">
            <HBox spacing="18" style="-fx-background-color: linear-gradient(to right, #4361ee, #5e60ce); -fx-padding: 16; -fx-background-radius: 12;">
                <VBox spacing="6">
                    <Label text="ðŸŽ‰ Gestion des Ã©vÃ©nements"
                           style="-fx-font-weight: bold; -fx-font-size: 22; -fx-text-fill: white;"/>
                    <Label text="Planifie, vends et remplis tes salles en un clin d'Å“il."
                           style="-fx-text-fill: rgba(255,255,255,0.9); -fx-font-size: 13;"/>
                </VBox>
                <HBox spacing="10" style="-fx-background-color: rgba(255,255,255,0.1); -fx-padding: 10; -fx-background-radius: 10;">
                    <Label text="âœ¨ Nouveaux shows" style="-fx-text-fill: white;"/>
                    <Label text="ðŸ”¥ Places en vente" style="-fx-text-fill: white;"/>
                    <Label text="ðŸš€ Live Ã  venir" style="-fx-text-fill: white;"/>
                </HBox>
                <HBox HBox.hgrow="ALWAYS"/>
                <VBox alignment="CENTER_RIGHT" spacing="8">
                    <HBox spacing="8">
                        <Button text="Actualiser" onAction="#handleRefresh"
                                style="-fx-background-color: #fff; -fx-text-fill: #364fc7; -fx-font-weight: bold; -fx-background-radius: 8;"/>
                        <Button text="Nouveau" onAction="#handleClearForm"
                                style="-fx-background-color: #ffd43b; -fx-text-fill: #2b2d42; -fx-font-weight: bold; -fx-background-radius: 8;"/>
                    </HBox>
                    <Label text="Ajoute un Ã©vÃ©nement, pose une date, c'est parti ðŸŽ¬"
                           style="-fx-text-fill: rgba(255,255,255,0.8); -fx-font-size: 11;"/>
                </VBox>
            </HBox>
        </VBox>
    </top>

    <!-- Tableau des Ã©vÃ©nements -->
    <center>
        <TableView fx:id="eventTable" style="-fx-background-radius: 10; -fx-border-color: #dbe4ff; -fx-border-radius: 10; -fx-border-width: 1;">
            <BorderPane.margin>
                <Insets top="0" right="15" bottom="10" left="15"/>
            </BorderPane.margin>
            <columns>
                <TableColumn fx:id="nomColumn" text="Line-up" prefWidth="240"/>
                <TableColumn fx:id="dateColumn" text="Date &amp; heure" prefWidth="150"/>
                <TableColumn fx:id="heureColumn" text="Heure" prefWidth="90"/>
                <TableColumn fx:id="lieuColumn" text="Lieu" prefWidth="180"/>
                <TableColumn fx:id="capaciteColumn" text="CapacitÃ©" prefWidth="90"/>
                <TableColumn fx:id="prixColumn" text="Prix â‚¬" prefWidth="90"/>
            </columns>
        </TableView>
    </center>

    <!-- Formulaire de crÃ©ation/modification -->
    <bottom>
        <VBox spacing="12" style="-fx-padding: 16; -fx-background-color: #fff; -fx-background-radius: 14; -fx-border-color: #dbe4ff; -fx-border-radius: 14; -fx-border-width: 1; -fx-effect: dropshadow(gaussian, rgba(67,97,238,0.08), 12, 0.2, 0, 4);">
            <Label text="ðŸŽ§ Composer un nouvel Ã©vÃ©nement"
                   style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #364fc7;"/>
            <GridPane hgap="12" vgap="12">
                <columnConstraints>
                    <ColumnConstraints percentWidth="15"/>
                    <ColumnConstraints percentWidth="35"/>
                    <ColumnConstraints percentWidth="15"/>
                    <ColumnConstraints percentWidth="35"/>
                </columnConstraints>

                <Label text="Nom" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="nomField" GridPane.rowIndex="0" GridPane.columnIndex="1"
                           promptText="Nom de l'Ã©vÃ©nement"/>

                <Label text="Date" GridPane.rowIndex="0" GridPane.columnIndex="2"/>
                <DatePicker fx:id="dateField" GridPane.rowIndex="0" GridPane.columnIndex="3"/>

                <Label text="Heure" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <TextField fx:id="heureField" GridPane.rowIndex="1" GridPane.columnIndex="1"
                           promptText="HH:mm"/>

                <Label text="Lieu" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                <TextField fx:id="lieuField" GridPane.rowIndex="1" GridPane.columnIndex="3"
                           promptText="Ville / Salle"/>

                <Label text="CapacitÃ©" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <Spinner fx:id="capaciteSpinner" GridPane.rowIndex="2" GridPane.columnIndex="1"
                         editable="true"/>

                <Label text="Prix" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                <TextField fx:id="prixField" GridPane.rowIndex="2" GridPane.columnIndex="3"
                           promptText="0.00"/>

                <Label text="Description" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <TextArea fx:id="descriptionArea" GridPane.rowIndex="3" GridPane.columnIndex="1"
                          GridPane.columnSpan="3" prefRowCount="3" wrapText="true"
                          promptText="Ambiance, artistes, surprises... dÃ©cris l'expÃ©rience ðŸŽˆ"/>

                <HBox spacing="10" GridPane.rowIndex="4" GridPane.columnIndex="3"
                      alignment="CENTER_RIGHT">
                    <Button text="Enregistrer" onAction="#handleSave"
                            style="-fx-background-color: linear-gradient(to right, #3bc9db, #4263eb); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 8;"/>
                    <Button text="Supprimer" onAction="#handleDelete"
                            style="-fx-background-color: #c92a2a; -fx-text-fill: white; -fx-background-radius: 8;"/>
                </HBox>
            </GridPane>
        </VBox>
    </bottom>

</BorderPane>
